<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <meta charset="UTF-8">
    <title>main</title>
</head>
<body>
<ul style="list-style-type: none" id="mainUl">
    <li style="float: left; margin-right: 10px"><a href="/">홈</a></li>
    <li><a href="/signup">회원가입</a></li>
</ul>
<h1>로그인 페이지</h1>
<form id="loginForm">
    <span>ID</span>
    <input name="username" type="text">
    <br><br>

    <span>Password</span>
    <input name="password" type="password">

    <button type="button" id="btnLogin">로그인</button>
</form>


</body>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<!-- ❹ AJAX 쿼리를 사용가능하게 jquery 사용 -->

<script>

    $("#btnLogin").on('click', function (){

        let formSerializeArray = $('#loginForm').serializeArray()
        var object = {};
        for (var i = 0; i < formSerializeArray.length; i++){
            object[formSerializeArray[i]['name']] = formSerializeArray[i]['value'];
        }
        var loginUser = JSON.stringify(object)
        console.log(loginUser)

        $.ajax({
            url: "/login",
            type: "POST",
            data: loginUser,
            success: function (data){
                if(data == true){
                    console.log("성공")
                    alert("로그인 성공")
                    window.location.replace("/")
                    return
                } else {
                    alert(data)
                    return
                }
            },
            error: function (){
                console.log("실패")
            }
        })
    })

</script>

</html>